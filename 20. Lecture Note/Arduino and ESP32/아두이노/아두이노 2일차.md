

오늘은 다양한 아두이노 키트를 사용해 보자

현재 servo라는 라이브러리를 설치함

이런 라이브러리를 설치하면 file의  ***Example***에서 다양한 명령어를 확인 할 수 있다

예를 들어 여기에 서는 PINMODE가 없고 attach를 사용한다

```arduino
int led[12] = {2,3,4,5,6,7,8,14,15,16,17,18};   //여기서 12는 배정하지 않아도 됨

void setup() {
  // put your setup code here, to run once:
  for(int x=0;x<=11;x++){
    pinMode(led[x],OUTPUT);
  }
}

void loop() {
  int x = random(0,12);          // range는 마지막 숫자 이전까지만 random하게 지정한다.
  digitalWrite(led[x],HIGH);
  delay(100);
  digitalWrite(led[x],LOW);

}
```

[KakaoTalk_20240712_102508360.mp4](KakaoTalk_20240712_102508360.mp4)

하트 모양으로 회로를 구성한 다음 각각의 핀을 랜덤하게 불이 들어오게 설정

여기서 array설정하는 것을 잘 기억하자

이건 시리얼 모니터에 3~10을 출력하는 방식이다

```arduino
int pin[8] = {3,4,5,6,7,8,9,10};

void setup() {
  // put your setup code here, to run once:
  Serial.begin(9600);
  for(int i = 3; i<= 10; i++){
    Serial.println(i);
  }
}

void loop() {
  // put your main code here, to run repeatedly:

}
```

배열이용

```arduino
int pins[8] = {3,4,5,6,7,8,9,10};

void setup() {
  // put your setup code here, to run once:
  Serial.begin(9600);
  for(int i = 0; i<= 8; i++){
    Serial.println(pins[i]);
  }
}

void loop() {
  // put your main code here, to run repeatedly:

}
```

모르는 배열의 길이 구하기

```arduino
int pins[] = {3,4,5,6,7,8,9,10};

void setup() {
  // put your setup code here, to run once:
  Serial.begin(9600);
  Serial.println(sizeof(pins)/sizeof(pins[0])); // 전체 len을 모를 때 전체의 길이를 구하고 하나로 나누면 길이가 나온
  // for(int i = 0; i<= 8; i++){
  //   Serial.println(pins[i]);
  // }
}

void loop() {
  // put your main code here, to run repeatedly:

}
```

이번엔 이걸 이용하여 출력

```arduino
int pins[] = {3,4,5,6,7,8,9,10};
int len = sizeof(pins)/sizeof(pins[0]);

void setup() {
  // put your setup code here, to run once:
  Serial.begin(9600);
  for(int i = 0; i<= len; i++){     // 여기에 종료되는 숫자를 모를 때 출력하는 법
    Serial.println(pins[i]);
  }
}

void loop() {
  // put your main code here, to run repeatedly:

}
```

내가 만든 것 수정

```arduino
int pins[] = {3,4,5,6,7,8,9,10};
int len = sizeof(pins)/sizeof(pins[0]);

void setup() {
  // put your setup code here, to run once:
  Serial.begin(9600);
  for(int i = 0; i<= len; i++){
    Serial.println(pins[i]);
  }
}

void loop() {
  // put your main code here, to run repeatedly:

}
```

디지털을 아날로그로 표현하는 방식

![Untitled](Untitled%2020.png)

```arduino
int pin_num = 8;

void setup(){
  pinMode(pin_num,OUTPUT);
}

void loop(){
  for(int i =0; i<=1000;i++){
    digitalWrite(pin_num, HIGH);
    delay(i);
    digitalWrite(pin_num, LOW);
    delay(1000-i);
  }
}

```

이러면 점점 밝아지는 것으로 보인다

button 제어

PULL UP vs PULL DOWN vs INPUT_PULLUP

# 아두이노 2일차 오후

토글이란 이전의 상태에서 변화 한다면 그것을 고정 한다는 것이다.

```arduino
bool button_state = false;
bool prev_button_state = false;
bool led_state = false;

void setup(){
//  pinMode(pin_num, OUTPUT);
pinMode(4, INPUT_PULLUP);
Serial.begin(9600);
}

void loop(){
  button_state = digitalRead(4);
  // 안누르면 True, 누르면 False
  Serial.println(button_state);
  if (button_state  == false) && (prev_button_state == true){ 
    led_state = !led_state;     // 이게 이전 상태와 반대로 간다는 것
    digitalWrite(13,led_state);
  }
  
  // 전단계로 바꿔주는 것.
  prev_button_state = button_state;
  delay(50);
  }
```

![Untitled](Untitled%2021.png)

![Untitled](Untitled%2022.png)

[https://kocoafab.cc/tutorial/view/526](https://kocoafab.cc/tutorial/view/526)

여기서 PULLUP, PULLDOWN 확인하기

토글

```arduino
bool button_state = false;
bool prev_button_state = false;
bool led_state = false;

void setup(){
//  pinMode(pin_num, OUTPUT);
pinMode(4, INPUT_PULLUP);
Serial.begin(9600);
}

void loop(){
  button_state = digitalRead(4);
  // 안누르면 True, 누르면 False
  Serial.println(button_state);
  if ((button_state  == true) && (prev_button_state == false)){ 
    led_state = !led_state;     // 이게 이전 상태와 반대로 간다는 것
    digitalWrite(13,led_state);
  }
  
  // 전단계로 바꿔주는 것.
  prev_button_state = button_state;
  delay(50);
  }
```

위에서 한 걸 누르면 빨강색 다시 누르면 파란색으로 바뀌는 코드를 짜보자

```arduino
bool button_state1 = false;
//bool button_state2 = true;
bool prev_button_state1 = false;
//bool prev_button_state2 = true;
bool led_state1 = false;
//bool led_state2 = true;

void setup(){
  Serial.begin(9600);
  pinMode(12, INPUT_PULLUP);
}

void loop(){
  button_state1 = digitalRead(12);
  //button_state2 = digitalRead(4);
  
  Serial.println(button_state1);
  //Serial.println(button_state2);
  
  if ((button_state1  == true) && (prev_button_state1 == false)){ 
    // 이게 true이면 파란색이 들어오고 false면 붉은 색이 들어온다
    led_state1 = !led_state1;    
    digitalWrite(2,led_state1);
    digitalWrite(4, !led_state1);
  }
  else{
    //led_state2 = !led_state2;    
    digitalWrite(4,led_state1);
    digitalWrite(2, !led_state1);
  }
  
  prev_button_state1 = button_state1;
  //prev_button_state2 = button_state2;
  delay(50);
```

![Untitled](Untitled%2023.png)

하트에 불켜기

```arduino
int led[] = {2,3,4,5,6,7,8,14,15,16,17,18};
int len = sizeof(led)/sizeof(led[0]);

bool button_state = false;
bool prev_button_state = false;
bool led_state = false;

void setup() {
  // put your setup code here, to run once:
  Serial.begin(9600);
  pinMode(12, INPUT_PULLUP);
  for(int x=0;x<=len;x++){
    pinMode(led[x],OUTPUT);
  }
}

void loop() {
  button_state = digitalRead(12);
  Serial.println(button_state);
  if ((button_state  == true) && (prev_button_state == false)){   // 여기서 true와 false를 바꾸면 누를 때가 아닌 땔때 실행 된다
    led_state = !led_state;     // 이게 이전 상태와 반대로 간다는 것
    for(int x=0; x<=len; x++){
      digitalWrite(led[x],led_state);
      delay(5);
      }
    }
    prev_button_state = button_state;
    delay(50);
}

```

![KakaoTalk_20240712_155811021_01.jpg](KakaoTalk_20240712_155811021_01.jpg)

![KakaoTalk_20240712_155811021.jpg](KakaoTalk_20240712_155811021.jpg)

마이크로 서보

노랑 - pin

빨강 5V

갈색 - 마이너스

```arduino
#include <Servo.h>

Servo my_servo;

void setup() {
  my_servo.attach(3);
  my_servo.write(90);
  delay(1000);

}
void loop() {
  my_servo.write(5);
  delay(1000);
  my_servo.write(175);
  delay(1000);
}
```

![1.jpg](1.jpg)

[2.mp4](2.mp4)

5도씩 돌아가는 코드

```arduino
#include <Servo.h>

Servo my_servo;

void setup() {
  my_servo.attach(3);  //3번핑에 연결
  my_servo.write(90);
  delay(1000);

}
void loop() {
  for(int i = 5; i<180; i+=5){
  my_servo.write(i);
  delay(100);
  }
  for(int i = 180; i>0; i-=5){
  my_servo.write(i);
  delay(100);
  }
}

```

시리얼 입력은 로봇암 시간에 많이 하므로 기억

가변 저항은 돌리면서 저항의 강도를 바꾸는 것이다.

이 친구는 INPUT이다. 또한 아날로그이다.

우노에는 아날로그 INPUT전용이 있다. 그래서 거기에 연결해야 할 친구이다.

아날로그 INPUT은 PINMODE를 사용하지 않아도 됨.

VCC: 5V

GND : GND

out : A0

```arduino
#include <Servo.h>

Servo my_servo;

void setup() {
  Serial.begin(9600);
  //my_servo.attach(3);
  //my_servo.write(90);
  //delay(1000);
}
void loop(){
 int data = analogRead(A0);
 Serial.println(data);
  delay(50);
}
```

가변저항의 다이얼 값에 따라 숫자가 다르게 print된다.

```arduino
#include <Servo.h>

Servo my_servo;

void setup() {
  Serial.begin(9600);
  my_servo.attach(3);
  my_servo.write(90);
  //delay(1000);
}
void loop(){
 int data = analogRead(A0);
 Serial.println(data);
  my_servo.write(data/10);
 delay(50);
}
```

map을 사용하여 1023 을 180으로 맞추기

```arduino
#include <Servo.h>

Servo my_servo;

void setup() {
  Serial.begin(9600);
  my_servo.attach(3);
  my_servo.write(90);
  //delay(1000);
}
void loop(){
 int data = analogRead(A0);
 Serial.println(data);
  int angle = map(data,0,1023,0,180);
  my_servo.write(angle);
  Serial.print(data);
  Serial.print(",");
  Serial.println(angle);
  delay(50);
}
```

map은 data의 값을 원하는 범위로 편집해서 저장해주는 라이브러리 이다.

[4.mp4](4.mp4)

초음파 센서 - 음파로 측정한다.

VCC

GND

Trig - 여기서 로우 하이를 잡음.  음파를 보냄. 로우 하이 로우로 보냄.

Echo - 그다음 어디에 부딛혀 온 것을 여기서 잡음

```arduino
// ---------------------------------------------------------------------------
// Example NewPing library sketch that does a ping about 20 times per second.
// ---------------------------------------------------------------------------

#include <NewPing.h>

#define TRIGGER_PIN  12  // Arduino pin tied to trigger pin on the ultrasonic sensor.
#define ECHO_PIN     11  // Arduino pin tied to echo pin on the ultrasonic sensor.
#define MAX_DISTANCE 200 // Maximum distance we want to ping for (in centimeters). Maximum sensor distance is rated at 400-500cm.

NewPing sonar(TRIGGER_PIN, ECHO_PIN, MAX_DISTANCE); // NewPing setup of pins and maximum distance.

void setup() {
  Serial.begin(115200); // Open serial monitor at 115200 baud to see ping results.
}

void loop() {
  delay(50);                     // Wait 50ms between pings (about 20 pings/sec). 29ms should be the shortest delay between pings.
  Serial.print("Ping: ");
  Serial.print(sonar.ping_cm()); // Send ping, get distance in cm and print result (0 = outside set distance range)
  Serial.println("cm");
}
```