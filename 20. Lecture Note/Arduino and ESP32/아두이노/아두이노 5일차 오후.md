# 아두이노 5일차 오후

# RC car 만들기

1. 모터  부착

![KakaoTalk_20240717_142853967.jpg](KakaoTalk_20240717_142853967.jpg)

1. 2개 부착 확인
    
    ![KakaoTalk_20240717_222527072.jpg](KakaoTalk_20240717_222527072.jpg)
    

1. 모터를 연결한 모터 디바이스
    
    ![KakaoTalk_20240717_222527072_01.jpg](KakaoTalk_20240717_222527072_01.jpg)
    

1. 모터 2개를 돌리려면 외부전력이 필요하므로 외부전력을 부착한다.
    
    ![KakaoTalk_20240717_222527072_03.jpg](KakaoTalk_20240717_222527072_03.jpg)
    

1. 그 위로 상판을 부착한 다름 아두이노와 다른 필요한 센서, 모터 등을 빵판을 이용하여 연결해준다. 이때 잘못 연결하면 모든 게 타버릴 수 있으므로 주의
    
    ![KakaoTalk_20240717_222527072_04.jpg](KakaoTalk_20240717_222527072_04.jpg)
    

1. 측면 모습
    
    ![KakaoTalk_20240717_222527072_05.jpg](KakaoTalk_20240717_222527072_05.jpg)
    

1. 9V를 연결하면 모터 디바이스에 전원이 들어오며 전력이 공급 된 것을 확인할 수 있다.
    
    ![KakaoTalk_20240717_222527072_06.jpg](KakaoTalk_20240717_222527072_06.jpg)
    

1. 다른 AA건전지도 연결하면 아두이노와 센서에도 전원이 들어온다.
    
    ![KakaoTalk_20240717_222527072_07.jpg](KakaoTalk_20240717_222527072_07.jpg)
    
    ![KakaoTalk_20240717_222527072_08.jpg](KakaoTalk_20240717_222527072_08.jpg)
    

1. 이후에 아래의 코드를 넣고 아두이노에 송신하여 실행시킨다.

이번엔 라인트레이싱 RC카 코드 만들기

```python
#define ir_R 4
#define ir_L 3

#define motor_A_1A 6
#define motor_A_1B 5
#define motor_B_1A 10
#define motor_B_1B 9

int moving_direction = 0;
int moving_speed = 0;
int delta_R = 0;
int delta_L = 0;
int speed_R = 100;
int speed_L = 100;

void forward(int speed_R, int speed_L) {
  analogWrite(motor_A_1A, 0);
  analogWrite(motor_A_1B, speed_R);
  analogWrite(motor_B_1A, speed_L);
  analogWrite(motor_B_1B, 0);
}

void backward(int speed_R, int speed_L) {
  analogWrite(motor_A_1A, speed_R);
  analogWrite(motor_A_1B, 0);
  analogWrite(motor_B_1A, 0);
  analogWrite(motor_B_1B, speed_L);
}

void turnLeft(int speed_R, int speed_L) {
  analogWrite(motor_A_1A, 0);
  analogWrite(motor_A_1B, speed_R);
  analogWrite(motor_B_1A, 0);
  analogWrite(motor_B_1B, speed_L);
}

void turnRight(int speed_R, int speed_L) {
  analogWrite(motor_A_1A, speed_R);
  analogWrite(motor_A_1B, 0);
  analogWrite(motor_B_1A, speed_L);
  analogWrite(motor_B_1B, 0);
}

void stopAll() {
  analogWrite(motor_A_1A, 0);
  analogWrite(motor_A_1B, 0);
  analogWrite(motor_B_1A, 0);
  analogWrite(motor_B_1B, 0);
}

void setup() {
  Serial.begin(115200);
  
  pinMode(ir_R,INPUT);
  pinMode(ir_L,INPUT);

  pinMode(motor_A_1A, OUTPUT);
  pinMode(motor_A_1B, OUTPUT);
  pinMode(motor_B_1A, OUTPUT);
  pinMode(motor_B_1B, OUTPUT);
}

void loop() {
  int val_R = digitalRead(ir_R);
  int val_L = digitalRead(ir_L);

  if (val_R == LOW && val_L == LOW) {
    forward(80,80);
    Serial.println("F");

  } else if (val_R == HIGH && val_L == HIGH) {
    stopAll();

  } else if (val_L == HIGH) {
    turnLeft(90,90);
    Serial.println("L");
    delay(170);

  }  else if (val_R == HIGH) {
    turnRight(90,90);
    Serial.println("R");
    delay(170);
  }
}

```

1. 만약 이때 코드를 잘못짜면 아래와 같은 현상이 생긴다.
    
    [20240717_164942.mp4](20240717_164942.mp4)
    

1. 코드를 다시 손 보고 센서를 조절하여 검정색과 바닥색의 구분 할 수 있게 만들면 아래와 같은 아린 트레이싱 RC car를 만들 수 있다.

[KakaoTalk_20240717_174107167.mp4](KakaoTalk_20240717_174107167.mp4)